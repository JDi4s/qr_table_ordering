<h1>Menu for Table <%= @table.number %></h1>

<p>
  <%= link_to "My Orders", my_table_orders_path(@table.qr_token) %>
</p>

<%= form_with url: table_orders_path(@table.qr_token), method: :post, local: true do |f| %>
  <p>
    <label><strong>Notes (optional)</strong></label><br>
    <%= f.text_area :note, rows: 2, style: "width:100%; max-width:520px;" %>
  </p>

  <% index = 0 %>

  <% @categories.each do |category, items| %>
    <% next if items.empty? %>

    <h2><%= category.name %></h2>

    <% items.each do |item| %>
      <div style="margin-bottom: 10px;">
        <strong><%= item.name %></strong> ($<%= item.price %>)

        <input type="hidden"
               name="order[order_items_attributes][<%= index %>][menu_item_id]"
               value="<%= item.id %>">

        <input type="number"
               name="order[order_items_attributes][<%= index %>][quantity]"
               value="0"
               min="0"
               style="width: 60px; margin-left: 10px;">
      </div>

      <% index += 1 %>
    <% end %>
  <% end %>

  <button type="submit" style="padding: 8px 12px; font-size: 16px;">
    Submit Order
  </button>
<% end %>
