<h1>All Orders</h1>

<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>ID</th>
    <th>Table</th>
    <th>Status</th>
    <th>Items</th>
    <th>Actions</th>
  </tr>

  <% @orders.each do |order| %>
    <tr>
      <td><%= order.id %></td>
      <td><%= order.table.number %></td>
      <td><%= order.status.capitalize %></td>
      <td>
        <ul>
          <% order.order_items.each do |oi| %>
            <li><%= oi.menu_item.name %> x <%= oi.quantity %></li>
          <% end %>
        </ul>
      </td>
      <td>
        <% if order.pending? %>
          <%= button_to "Accept", staff_order_path(order, status: "accepted"), method: :patch, form: { data: { turbo: true } } %>
          <%= button_to "Deny", staff_order_path(order, status: "denied"), method: :patch, form: { data: { turbo: true } } %>
        <% else %>
          <em>No actions</em>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>

<p>
  <%= link_to "View All Tables & QR Codes", staff_tables_path, class: "button" %>
</p>
